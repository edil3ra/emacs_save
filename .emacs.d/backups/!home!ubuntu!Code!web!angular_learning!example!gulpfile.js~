var gulp = require('gulp'),
    browsersync = require('browser-sync'),
    plumber = require('gulp-plumber'),
    compass = require('gulp-compass');

var src = {
    scss: 'scss/*.scss',
    html: '**/*.html',
    html2: '*.html',
    js: '**/*.js'
};

gulp.task('browser-sync', function() {
    browsersync({
        open: false,
        notify: false,
        server: {
            baseDir: './'
        }
    });
});

gulp.task('compass', function() {
    gulp.src(src.scss)
        .pipe(plumber())
        .pipe(compass({
            config_file: 'config.rb',
            css: 'css',
            sass: 'scss'
        }))
        .pipe(browsersync.reload({
            stream: true
        }));
});

gulp.task('reload', function() {
    browsersync.reload();
});

gulp.task('default', ['compass', 'browser-sync'], function() {
    gulp.watch(src.scss, ['compass']);
    gulp.watch([src.js, src.html, src.html2 ], ['reload']);
});
